CheckingForClosedApplication — это приложение на WPF (Windows Presentation Foundation), разработанное для мониторинга и управления запуском стороннего процесса (приложения). Оно отслеживает указанное приложение, перезапускает его при закрытии (если это разрешено) и предоставляет пользователю возможность закрыть оба приложения (мониторящее и отслеживаемое) с помощью настраиваемой кнопки. Приложение поддерживает гибкую конфигурацию через JSON-файл и ведёт подробный журнал всех действий.

Основные функции:

Мониторинг процесса:
Запускает указанное в настройках приложение (например, 6.exe).
Следит за его состоянием и автоматически перезапускает его, если оно закрывается, при условии, что перезапуск не отключен.

Закрытие приложений: Позволяет пользователю закрыть отслеживаемое приложение и само приложение мониторинга с помощью кнопки на экране.

Поддерживает настройку таймера: приложение может закрываться либо сразу после нажатия, либо после удержания кнопки в течение заданного времени.

Настраиваемый интерфейс:
Окно может быть прозрачным или с фоновым изображением.
Кнопка закрытия настраивается по размеру, расположению и стилю (с фоном или без).

Логирование:
Все действия (запуск, закрытие, ошибки) записываются в лог-файлы в папке logs для отладки и анализа.

Дополнительные возможности:
Опционально запускает Проводник Windows перед закрытием (если включено в настройках).

Как это работает?
При запуске приложение читает настройки из файла appsettings.json.
Запускает указанный процесс и начинает его мониторинг в фоновом режиме.
Если процесс завершается, приложение либо перезапускает его (по умолчанию), либо завершает работу, если перезапуск отключён.
Пользователь может закрыть всё с помощью кнопки, которая либо срабатывает мгновенно, либо требует удержания (в зависимости от настроек).

Как пользоваться приложением

Требования:
Операционная система: Windows.

Установленный .NET (версия зависит от сборки проекта, например, .NET 6 или выше).

Файл appsettings.json в корневой папке приложения с правильной конфигурацией.

Установка:

Скомпилируйте проект в Visual Studio или используйте готовый исполняемый файл (CheckingForClosedApplication.exe).
Поместите файл appsettings.json в ту же папку, что и .exe.

Пример файла appsettings.json:
json
{

    "ApplicationName": "C:\\Path\\To\\YourApp.exe", // Путь к приложению, которое нужно мониторить
    "ExplorerKill": false,                         // Убивать Проводник Windows (не используется в текущей версии)
    "IsThereBackground": false,                    // Включить фоновое изображение окна
    "BackgroundPath": "C:\\Path\\To\\Image.jpg",   // Путь к фоновому изображению
    "IsButton": true,                              // Показывать кнопку закрытия
    "OnTimer": true,                               // Включить таймер для кнопки
    "TimerSecond": 5,                              // Время удержания кнопки (в секундах)
    "IsBackgroundButton": true,                    // Включить фон кнопки (красный)
    "X": 100,                                      // Позиция кнопки по X
    "Y": 100,                                      // Позиция кнопки по Y
    "WidthButton": 120,                            // Ширина кнопки
    "HeightButton": 120                            // Высота кнопки
}

Использование:
Запустите CheckingForClosedApplication.exe.
Приложение автоматически откроет приложение, указанное в ApplicationName (например, YourApp.exe), и начнёт его отслеживать.

Управление кнопкой:
Если "IsButton": true, на экране появится кнопка (по умолчанию красная, если "IsBackgroundButton": true).

Без таймера ("OnTimer": false):
Нажмите кнопку один раз, чтобы закрыть отслеживаемое приложение и мониторинг.

С таймером ("OnTimer": true):
Нажмите и удерживайте кнопку в течение времени, указанного в "TimerSecond" (например, 5 секунд).
После удержания оба приложения закроются, и, если "ExplorerKill": false, откроется проводник Windows.

Остановка перезапуска:
Закрытие через кнопку отключает автоматический перезапуск отслеживаемого приложения.

Логи:
Проверьте папку logs в каталоге приложения. Лог-файлы (например, log-20250306.txt) содержат информацию о запуске, закрытии и ошибках.

Пример сценария:
У вас есть приложение 6.exe, которое иногда закрывается само по себе.

Вы настраиваете appsettings.json с

    "ApplicationName": "C:\\Users\\User\\Desktop\\6.exe", 
    "IsButton": true, 
    "OnTimer": true, 
    "TimerSecond": 3.
    
Запускаете CheckingForClosedApplication.exe.
6.exe открывается, и если оно закрывается, мониторинг перезапускает его.

Чтобы завершить всё, удерживаете кнопку 3 секунды — оба приложения закрываются.

Настройка и кастомизация

Путь к приложению: измените "ApplicationName" на нужный путь.

Кнопка: настройте «X», «Y», «WidthButton», «HeightButton» для изменения положения и размера кнопки.
Таймер: Включите "OnTimer" и задайте "TimerSecond" для управления поведением кнопки.
Фон: Установите "IsThereBackground": true и укажите "BackgroundPath", чтобы добавить изображение в окно.
